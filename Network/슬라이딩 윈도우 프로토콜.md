# 슬라이딩 윈도우 프로토콜  

실제 통신 환경에서는 프레임 전송이 대부분 양방향으로 이루어진다.
슬라이딩 윈도우 프로토콜은 두 호스트 간의 프레임 전송을 위한 일반적인 통신 프로토콜로, **오류 제어**와 **흐름 제어** 기능을 함꼐 지원한다.  



## 흐름 제어

슬라이딩 윈도우는 ‘윈도우의 이동’을 의미하며, 이는 흐름 제어 기능을 상징적으로 대변한다.

수신 호스트가 연속으로 수신할 수 있는 정보 프레임의 개수를 윈도우의 크기로 지정함으로써, 송신 호스트의 프레임 전송 속도를 제어한다.

## 연속형 전송

송신 호스트와 수신 호스트 사이의 물리적 거리 차로 인해 프레임의 전송 시간이 상대적으로 오래 걸리는 환경에서 *윈도우 크기가 1이면, 전송 효율이 극단적으로 떨어진다.

(*윈도우 크기(Window Size): 송신 호스트가 수신 호스트로부터 긍정 응답 프레임을 받지 않고도 전송할 수 있는 정보 프레임의 최대 개수)

이를 해결하려면 윈도우 크기를 늘려 ACK 프레임을 받지 않고도 여러 정보 프레임을 연속으로 전송할 수 있어야 하는데, 이러한 방식을 연속형 전송(Pipelining)이라 한다.

전송된 정보 프레임에 대한 ACK 프레임의 회신이 이루어지지 않은 상태에서 다음 프레임을 전송하는 방식이기 때문에 전송 오류가 발생할 가능성이 적은 환경에서는 상당히 효율적이다.

연속형 전송 방식의 오류를 해결하는 방법에는 고백 N 방식과 선택적 재전송 방식이 있다.

### 1) 고백 N 방식(Go-Back-N)
<p align="center">
  <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2F7nZyH%2FbtraNIWIqwp%2FX1CRqiKPgATc7JbV9GyiNk%2Fimg.png"/>
</p> 
예를 들어, 윈도우 크기가 8인 환경에서 송신 호스트가 10~17번 정보 프레임을 전송하는 경우를 가정해보자.

12번 프레임에만 오류가 발생하고 나머지는 모두 오류 없이 수신되었다면 오류 복구 과정에서 **오류가 발생한 12번 프레임을 포함해 이후에 전송된 모든 정보 프레임을 재전송하는 방식**을 Go-Back-N 방식이라고 한다.

오류가 발생한 프레임뿐 아니라, 정상적으로 수신한 프레임까지 재전송한다는 문제점이 있다. 따라서 직관적인 관점에서 보면 매우 비효율적이라고 생각될 수 있지만, 송수신 호스트 사이의 전송 지연 등에 따라서는 효과적인 처리 방법이 될 수 있다.

### 2) 선택적 재전송 방식(Selective Retransmission)  
<p align="center">
  <img src="https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FUsDKB%2FbtraVpn3vr5%2FsUJOmP2utk67tPETGkanxK%2Fimg.png"/>
</p> 

직관적인 관점에서 고백 N 방식의 문제점은 수신 호스트가 올바르게 수신한 정보 프레임도 오류로 처리해 재전송한다는 것이다. 이 문제점을 해결하려면 (문제가 발생한)12번 정보 프레임만 재전송하고 수신 호스트가 제대로 수신한 13~17번 정보 프레임은 정상적으로 처리하여 재전송되지 않도록 해야 한다.

**오류가 발생한 프레임만 선택적으로 복구하는 방식**을 선택적 재전송이라 한다.

## 피기 배킹  
<p align="center">
  <img src="https://t1.daumcdn.net/cfile/tistory/2409BD4B58FB142C04"/>
</p> 

정보 프레임의 구조를 적당히 조정해 재정의 하면 **정보 프레임을 전송하면서 응답 기능까지 함께 수행**할 수 있다.

양방향으로 동시에 정보 프레임과 응답 프레임을 교차하여 전송하는 방식이다.

이런 방식으로 프로토콜을 작성하면 **응답 프레임의 전송 횟수를 줄이는 효과**가 있어 전송 효율을 높일 수 있는데, 이를 피기배킹(Piggybacking)이라 한다.

