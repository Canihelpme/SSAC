## 💡이더넷  

LAN 구간에서 사용되는 네트워킹 방식 중 하나로, Layer 2계층에서 사용되는 프로토콜이다.  
CSMA/CD(Carrier Sense Multiple Access with Collision Detection) 통신 방식을 사용한다.  

### 1. 신호 감지(Carrier Sense) 프로토콜  
> 전송 매체의 신호를 감지해 프레임 전송 여부를 결정 가능  

#### 1-1. 1-persistent CSMA  
프레임 전송 전 채널 사용 여부를 계속해서 확인  
채널 사용 중 -> 유휴 상태가 될 때까지 계속 대기  
채널 유휴상태 -> 확률 1의 조건으로(무조건) 프레임 전송  
충돌이 발생하면 임의 시간 대기 후 다시 채널을 감시  

#### 1-2. Non-persistent CSMA  
프레임 전송 전 채널 사용 여부를 최초 한 번만 확인  
채널 사용 중 -> 유휴 상태를 더 이상 확인하지 않음  
대신 임의의 시간 동안 대기 이후 다시 채널 감지를 시작  
임의 시간 대기하기 때문에 1-persistent 보다 충돌 확률 감소  

#### 1-3. p-persistent  
슬롯 채널 방식에서 많이 사용  
채널 유휴 상태 -> p의 확률로 프레임 전송  
채널 사용 중 -> 다음 슬롯을 기다린 후 앞의 과정을 반복(감시, p 확률로 전송)  

#### 1-4. CSMA/CD  
둘 이상의 호스트에서 채널이 유휴 상태라고 판단 가능(-> 이러면 프레임 전송 시 충돌 발생)  
충돌이 감지되면 진행중인 프레임의 전송을 중지, 재전송으로 해결  

### 2. 프레임 구조  
#### 2-1. MAC 프레임  
: MAC 헤더 + LLC 프레임 + MAC 트레일러  

LLC 프레임: LLC 계층이 MAC 계층에서 전송하도록 요청한 데이터  

#### 2-2. 이더넷 프레임 구조
데이터 필드 왼쪽은 헤더, 오른쪽은 트레일러에 속함  
![image](https://2.bp.blogspot.com/-KA25Bb1uEGc/Woo1CUgE8zI/AAAAAAAACkw/CTpJM7NaFQUMWyEDh85VqUR-8n8lnQDzQCK4BGAYYCw/s640/image001-784992.png)  

- Preamble(7)  
수신 호스트가 송신 호스트의 클록과 동기를 맞출 수 있도록 시간 여유를 제공  
1010_1010 사용  
- Start of Frame Delimiter(1)  
프레임이 시작된다는 의미. 앞선 Preamble 필드와 구분하기 위해  
1010_1011 사용  
---
- Destination Address(6)  
수신 호스트 주소로 고유 MAC 주소 사용  
- Source Address(6)  
송신 호스트 주소로 고유 MAC 주소 사용  
- Length/Type(2)  
필드 값이 1,518보다 작으면 Length, 1,536보다 크면 Type을 의미  
Length: Data 필드에 포함된 가변 길이의 전송 데이터 크기  
Type: 이더넷 프레임에 캡슐화된 PDU 패킷의 종류를 정의  
- Data(+Padding)(46-1500)  
전송하고자 하는 원본 데이터(캡슐화된 데이터)  
만약 최소 길이(46bytes)보다 작다면 끝에 Padding(0)으로 채워짐  
---
- FCS(CRC)(4)
송신 측에서 CRC를 추가하여 보내고, 수신 측은 CRC를 체크한 후 에러 프레임은 버림  
(데이터 전송 과정에서 데이터 변형 오류의 발생 여부를 수신 측이 확인할 수 있도록 함)  


### 3. LLC 프레임 캡슐화  
> 이더넷 프레임에서 Data 필드를 제외한 필드들이 MAC 계층에서 추가하는 정보  


### 4. 허브와 스위치
#### 4-1. 허브
박스 형태의 장비에 잭을 연결해서 이더넷 네트워크를 구성  
각 호스트는 외형상 허브에 스타형 구조로 연결되었으나  
내부 동작은 공유 버스 방식  

#### 4-2. 스위치 허브  
허브의 성능을 향상시킨 장비  
모든 호스트에게 프레임을 전송하지 않고,  
목적지로 지정된 호스트에만 프레임을 전송할 수 있는 **교환 기능** 이 추가로 존재  
따라서 동시에 여러 호스트가 데이터 전송 가능함  
장점 > 스위치 협의 용량이 허용되면 각각의 호스트는 할당된 LAN 용량을 모두 사용한다.  
일반 허브를 스위치 허브로 교환하는 과정이 간단해 설치가 쉽다.  
